<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<META NAME="generator" CONTENT="http://txt2tags.sf.net">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<LINK REL="stylesheet" TYPE="text/css" HREF="tech.css">
<TITLE>LCD模块驱动</TITLE>
</HEAD>
<BODY>

<DIV CLASS="header" ID="header">
<H1>LCD模块驱动</H1>
<H2>Group</H2>
<H3>2009-08-17</H3>
</DIV>

<DIV CLASS="toc" ID="toc">
  <UL>
  <LI><A HREF="#toc1">1. 显示器的选择方案</A>
    <UL>
    <LI><A HREF="#toc2">1.1. 方案一 LED数码显示管</A>
    <LI><A HREF="#toc3">1.2. 方案二 字符点阵LCD</A>
    </UL>
  <LI><A HREF="#toc4">2. 单片机与LCD液晶显示器的接口电路设计</A>
    <UL>
    <LI><A HREF="#toc5">2.1. LCD液晶显示原理</A>
    <LI><A HREF="#toc6">2.2. LCD12864的硬件连接</A>
    <LI><A HREF="#toc7">2.3. LCD12864显示软件设计</A>
    <LI><A HREF="#toc8">2.4. LCD模块函数设计</A>
    </UL>
  </UL>

</DIV>
<DIV CLASS="body" ID="body">
<A NAME="toc1"></A>
<H1>1. 显示器的选择方案</H1>
<A NAME="toc2"></A>
<H2>1.1. 方案一 LED数码显示管</H2>
<P>
选用LED数码管先试试智能车的各种信息。数码管由于显示速度快,使用简单,但是LED数码管的比较明显弱点是显示信息量小、功耗大，因此人机接口不是很完善，可以操纵的空间比较小。
</P>
<A NAME="toc3"></A>
<H2>1.2. 方案二 字符点阵LCD</H2>
<P>
选用字符点阵LCD模块显示智能车的各种信息（可控、自动避障、自动寻径）等，LCD不但信息量大、功耗低，而且，可以显示的范围比较大，可以根据实际情况选取不同规格的LCD。更重要的是它提供的标准并行或串行接口，驱动简单，使用简单，而且重用性很高。
</P>
<P>
由于要显示的信息量比较多，而且人机接口需要人性化，根据实际情况，我们采用方案二，所选取的LCD为LCD12864。
</P>
<A NAME="toc4"></A>
<H1>2. 单片机与LCD液晶显示器的接口电路设计</H1>
<A NAME="toc5"></A>
<H2>2.1. LCD液晶显示原理</H2>
<P>
液晶显示的原理是采用的有机化合物，在电压的作用下，使化合物的排列发生偏转，从而使光的折射角发生偏转，造成透射的程度不同，从而使液晶模块从表面看起来有不同的亮度，所以，液晶必须要在光的照射下才能够显示。这一点与发光二极管从原理上来说是完全不同的。
</P>
<P>
我们使用的液晶模块都是将液晶以及相应的驱动芯片，寄存器，驱动电源电路等一系列的辅助电路都集成在了一起，从二使用户能够更加的方便是液晶，驱动电路也会相应的简单一点。
</P>
<P>
通常来说，CJK(Chinese,Japanese,Korean)的字体需要16*16像素去表示，相应的拉丁字符和符号字符只是需要16*8像素表示就足够了。这些单位就是数字电路的1或者0，将这些点连接在一起，便可在视觉上形成汉字。这些二进制数称为代位码。而由这些代位码转换成的16进制数据称为子模(patterns)。
</P>
<P>
LCD12864采用的是点阵式液晶，分为128X64个点，即有1204个字节,也就是说每一个ROM内存单元对应一个点阵（像素）。因此，一屏液晶器可以显示16个汉字，32个字符。使用者可以通过取模软件取得想要显示在液晶显示器上的字符的字模，然后写入显示器的寄存器即可,便可将这些字模信息还原为文字。
</P>
<P>
相应的图片显示的原理也是如此，可以一试。
</P>
<A NAME="toc6"></A>
<H2>2.2. LCD12864的硬件连接</H2>
<P>
LCD12864有20个管脚。但是组成还是比较简单的。读写信号控制是由RS，RW，EN，CS1，CS2，RST 6个信号控制的，数据是由DB0-DB7 8个端口进行双向传送。另外有个输入管脚V0需要接入LCD调整电压来调节对比度。通常刚使用液晶时的问题是由此引起的，对比度过高于或过低均会使屏幕无法正常显示。
</P>
<P>
由实际电路连接图，本文将IO口DB0-DB7连接至C89051F的P2口，LCD12864的控制信号RS、RW、EN、CS1、CS2、RST连接至C8051F的P1.3、P1.4、P1.5、P1.6、P1.7、P0.7。
</P>
<A NAME="toc7"></A>
<H2>2.3. LCD12864显示软件设计</H2>
<P>
使用LCD12864时，需要对其寄存器以及功能器件有所了解。寄存器包括指令寄存器以及数据寄存器。通过对这两个寄存器的操作可改变LCD的显示方式和显示内容。
</P>
<P>
在LCD12864中存在行地址、列地址、以及页地址，而这些地址是由LCD中的地址计数器记录的。假如需要在屏幕上第二行开头空两格显示多个汉字，则先要向指令寄存器写入这几个字的位置，然后将其字模按序存入。
</P>
<P>
LCD12864显示器分为左半屏面和右半屏面。其中左边占64列，右边占64列。共128列。行分为64行。又将其分为8页，每一页占8行。列的起始地址为40H，行的起始地址为B8H。
</P>
<P>
LCD12864的操作都是通过对指令寄存器(IR)的配置实现的，包括X页寄存器，Y地址计数器，两者合称为XY地址计数器，显示起始行。
</P>
<P>
显示起始行地址绝大部分情况下设置为0，它的作用是设置液晶显示的起始行，它的取值范围在[0,63]，在程序设计中，可以通过算法合理改变现实起始行，就可以实现屏幕的上下滚动。
</P>
<P>
XY地址计数器是一个9位计数器，高3位是X地址计数器，低6位为Y地址计数器，是作为DDRAM的地址指针。X地址计数器为DDRAM的页指针，没有自动计数功能，只能用指令设置，取值范围是[0,7]。Y地址计数器为DDRAM的Y地址指针，在数据寄存器进行读写操作时，Y地址计数器具有循环技术功能，取之范围是[0，63]。
</P>
<P>
DDRAM存储图形显示数据的，数据为一便是选择，数据为0便是非选择。
</P>
<P>
在写入数据或指令之前，必须检验模块工作状态，即检查忙标志位BF(Busy Flag)，只有当BF位0是，便是模块为准备状态时，才可以写入数据或指令。
</P>
<P>
在进行读写操作时，应该遵照Datasheet的读写时序图进行程序的编写，时序的设置决定了最终的现实是否可以成功。
</P>
<P>
如下是液晶显示的原理图。
</P>
<P>
<IMG ALIGN="middle" SRC="lcd_flowchart.png" BORDER="0" ALT="">
</P>
<A NAME="toc8"></A>
<H2>2.4. LCD模块函数设计</H2>
</DIV>

<!-- html code generated by txt2tags 2.5 (http://txt2tags.sf.net) -->
<!-- cmdline: txt2tags -\-target html lcd_display.t2t -->
</BODY></HTML>
